(function(e,t,n){function r(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var i=e[n][1][t];return r(i?i:t)},u,u.exports)}return t[n].exports}var i=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r})({1:[function(e,t,n){function E(){w.lifes=5,w.score=0,w.level=1}function S(){u.dieAll()}function x(e){console.log("play around")}function T(){console.log("stopPlayAround")}function N(){u.on("not catch",function(){f.isResume&&(w.lifes--,o.updateStats(w),w.lifes==0&&L())})}function k(){h={move:function(){c.save(),c.fillStyle="#FFFCDD",c.fillRect(0,0,l.width,l.height),pattern=c.createPattern(C,"repeat"),c.translate(0,l.height-C.height),c.fillStyle=pattern,c.fillRect(0,0,l.width,C.height),c.restore()}},h.move()}function L(){w.score>v.highest&&(v.highest=w.score,F(),a.write(v),A()),setTimeout(function(){f.stop()})}function A(){o.showNewRecord()}function O(){clearInterval(p)}function M(){p=setTimeout(function(){var e=u.acquire();e?f.add(e):console.log("chicks is out of range."),M()},m-50*(w.level-1))}function _(){l.width=window.innerWidth,l.height=window.innerHeight}function D(){window.addEventListener("resize",_)}function P(){l.addEventListener("touchstart",function(e){b=!0,e.preventDefault();var t=e.touches[0].pageX,n=e.touches[0].pageY;H(t,n)}),l.addEventListener("touchend",function(e){e.preventDefault()}),l.addEventListener("mousedown",function(e){b||(H(e.clientX,e.clientY),console.log("is not a mobile"))}),l.addEventListener("dblclick",function(e){e.stopPropagation(),e.preventDefault()})}function H(e,t){f.isResume&&u.aliveChicks.forEach(function(n){e>n.x&&e<n.x+n.width&&t>n.y&&t<n.y+n.height&&(n.isDie||(n.isCatch=!0,n.die(),B()))})}function B(){w.score+=100,o.updateStats(w)}function j(){document.getElementById("play").addEventListener("mousedown",function(){f.isStop&&f.start()})}function F(){o.updateRecord(v.highest)}function I(){g=setInterval(function(){w.level++,q(),o.updateStats(w)},y*1e3)}function q(){s.isToRemove=!1,f.add(s),setTimeout(function(){f.remove(s)},1e3)}function R(){clearInterval(g)}var r=e("../src/game"),i=e("../src/chick"),s=e("../src/dog"),o=e("../src/pannel"),u=e("../src/chick-manager"),a=e("../src/local-record"),f=new r,l=document.getElementById("canvas"),c=l.getContext("2d"),h=null,p=null,d=[],v=a.read()||{highest:0},m=800,g=null,y=10,b=!1,w={lifes:5,score:0,level:1};f.on("init",function(){k(),u.init(l),_(),P(),D(),N(),j(),F(),x(),s.init(l),f.add(h)}),f.on("start",function(){o.hidePlannel(),T(),o.updateStats(w),M(),I()}),f.on("stop",function(){R(),O(),E(),S(),o.showPannel(),x()});var C=new Image;C.addEventListener("load",function(){f.init()}),C.src="img/bg.png"},{"../src/game":2,"../src/chick":3,"../src/dog":4,"../src/pannel":5,"../src/chick-manager":6,"../src/local-record":7}],5:[function(e,t,n){function m(){c.style.display="none"}function g(e){return document.querySelector(e)}function y(){u.style.display="block"}function b(){u.style.display="none"}function w(){f.style.display="block"}function E(){l.innerHTML=h}var r=g("#stats-score"),i=g("#stats-lifes"),s=g("#stats-level"),o=g("#mask"),u=g("#stats"),a=g("#highest"),f=g("#score-show"),l=g("#your-score"),c=g("#new-record"),h=0,p=0,d=0,v=0;n.hidePlannel=function(){o.style.display="none",y(),w(),m()},n.showPannel=function(e){o.style.display="block",b(),E()},n.updateStats=function(e){if(v!==e.lifes){var t="";for(var n=0,o=e.lifes;n<o;n++)t+="<image src='img/love.png'>";i.innerHTML=t,v=e.lifes}d!==e.level&&(s.innerHTML=e.level,d=e.level),p!==e.score&&(p=e.score,r.innerHTML=h=e.score)},n.updateRecord=function(e){a.innerHTML=e},n.showNewRecord=function(){c.style.display="inline-block"},b()},{}],4:[function(e,t,n){var r=new Image;r.src="img/dog.png";var i={init:function(e){this.x=e.width-r.width-30,this.y=30,this.ctx=e.getContext("2d")},move:function(){this.ctx.drawImage(r,this.x,this.y)}};t.exports=i},{}],7:[function(e,t,n){n.read=function(){var e=localStorage.getItem("stats");if(e)return JSON.parse(e)},n.write=function(e){localStorage.setItem("stats",JSON.stringify(e))}},{}],3:[function(e,t,n){function c(e){this.canvas=e,this.ctx=e.getContext("2d"),this.reset()}var r=e("./event"),i=new Image;i.src="img/chick.png";var s=new Image;s.src="img/chick-2.png";var o=new Image;o.src="img/die.png";var u=new Image;u.src="img/catch.png";var a=.1,f=5,l=4,h={reset:function(){this.isDie=!1,this.width=i.width,this.height=i.height,this.isCatch=!1,this.x=canvas.width/4+Math.random()*(canvas.width/2),this.y=canvas.height*.4,this.opacity=1,this.vx=-l+Math.random()*l*2,this.vy=-3+ -Math.random()*f,this.currentImg=i,this.count=0},move:function(){this.isDie||(this.updatePos(),this.detectBorder()),this.draw()},updatePos:function(){this.x+=this.vx,this.y+=this.vy,this.isDie||(this.vy+=a)},detectBorder:function(){this.x<5?(this.vx*=-0.65,this.vy*=.7,this.x=5):this.x+i.width>this.canvas.width&&(this.vx*=-0.65,this.vy*=.7,this.x=this.canvas.width-i.width),this.y>this.canvas.height-i.height-130?(this.emit("not catch"),this.die()):this.y<5&&(this.vy*=-0.65,this.vx*=.7,this.y=5)},die:function(){this.isDie=!0,this.vy=0,this.vx=0;var e=this;setTimeout(function(){e.emit("die")},1e3)},draw:function(){var e=this.ctx,t=this.isDie?o:this.nextImg(),t=this.isCatch?u:t;e.save(),this.isDie&&(e.globalAlpha=this.opacity,this.opacity-=.01),e.drawImage(t,this.x,this.y),e.restore()},nextImg:function(){return this.count<10?(this.count++,this.currentImg):(this.count=0,this.currentImg=this.currentImg==s?i:s,this.currentImg)}};t.exports=r.extend(c,h)},{"./event":8}],2:[function(e,t,n){e("./animation");var r=e("./event"),i=function(){this.isStart=!1,this.isStop=!0,this.isResume=!1,this.isPause=!0,this.sprits=[],this.timer=null},s={init:function(){this.emit("init"),this.render()},start:function(){this.isStart=!0,this.isStop=!0,this.resume(),this.emit("start")},stop:function(){this.isStart=!1,this.isStop=!0,this.pause(),this.emit("stop")},pause:function(){this.isPause=!0,this.isResume=!1,this.emit("pause")},resume:function(){this.isResume=!0,this.isPause=!1,this.emit("resume")},render:function(){function t(){var n=e.sprits;e.sprits=[];for(var r=0,i=n.length;r<i;r++){var s=n[r];if(!s.isToRemove){var s=n[r];e.sprits.push(s),s.move()}}e.timer=requestAnimationFrame(t)}var e=this;t()},add:function(e){if(typeof e.move!="function")throw"Sprit should have a `move` function.";this.sprits.push(e),this.emit("sprit added",e)},remove:function(e){e.isToRemove=!0,this.emit("sprit removed",e)}};t.exports=r.extend(i,s)},{"./animation":9,"./event":8}],6:[function(e,t,n){function s(){this.aliveChicks=[],this.deadChicks=[],this.MAX_CHICKS=30}var r=e("./chick"),i=e("./event"),o={init:function(e){return this.canvas=e,this},acquire:function(){if(this.deadChicks.length>0){var e=this.deadChicks.pop();e.isToRemove=!1,this.aliveChicks.push(e)}else{var t=this.aliveChicks.length+this.deadChicks.length;if(t<this.MAX_CHICKS){var e=new r(this.canvas);this.onDie(e),this.onNotCatch(e),this.aliveChicks.push(e)}}return e},onDie:function(e){var t=this;e.on("die",function(){e.isToRemove=!0,e.reset(),t.removeFromAlive(e)})},onNotCatch:function(e){var t=this;e.on("not catch",function(){t.emit("not catch",e)})},removeFromAlive:function(e){for(var t=0,n=this.aliveChicks.length;t<n;t++){var r=this.aliveChicks[t];if(r==e){this.aliveChicks.splice(t,1),this.deadChicks.push(e);break}}},removeFromDie:function(e){for(var t=0,n=this.deadChicks.length;t<n;t++){var r=this.deadChicks[t];if(r==e){e.isToRemove=!1,this.deadChicks.splice(t,1),this.aliveChicks.push(e);break}}},dieAll:function(){var e=this.aliveChicks.pop();while(this.aliveChicks.length)e.isToRemove=!0,e.reset(),this.deadChicks.push(e),e=this.aliveChicks.pop()}},s=i.extend(s,o);t.exports=new s},{"./chick":3,"./event":8}],9:[function(e,t,n){var r=0,i=["webkit","moz"];for(var s=0;s<i.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[i[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[s]+"CancelAnimationFrame"]||window[i[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-r)),s=window.setTimeout(function(){e(n+i)},i);return r=n+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})},{}],10:[function(e,t,n){function r(e,t){function i(){e.apply(this,arguments)}function s(){}var n=this;s.prototype=n.prototype,i.prototype=new s;for(var o in t)i.prototype[o]=t[o];return i.extend=r,i}n.extend=r},{}],8:[function(e,t,n){var r=e("./util"),i=e("eventemitter2").EventEmitter2;i.extend=r.extend,t.exports=i},{"./util":10,eventemitter2:11}],11:[function(e,t,n){(function(){!function(e){function i(){this._events={},this._conf&&s.call(this,this._conf)}function s(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function o(e){this._events={},this.newListener=!1,s.call(this,e)}function u(e,t,n,r){if(!n)return[];var i=[],s,o,a,f,l,c,h,p=t.length,d=t[r],v=t[r+1];if(r===p&&n._listeners){if(typeof n._listeners=="function")return e&&e.push(n._listeners),[n];for(s=0,o=n._listeners.length;s<o;s++)e&&e.push(n._listeners[s]);return[n]}if(d==="*"||d==="**"||n[d]){if(d==="*"){for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(i=i.concat(u(e,t,n[a],r+1)));return i}if(d==="**"){h=r+1===p||r+2===p&&v==="*",h&&n._listeners&&(i=i.concat(u(e,t,n,p)));for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(a==="*"||a==="**"?(n[a]._listeners&&!h&&(i=i.concat(u(e,t,n[a],p))),i=i.concat(u(e,t,n[a],r))):a===v?i=i.concat(u(e,t,n[a],r+2)):i=i.concat(u(e,t,n[a],r)));return i}i=i.concat(u(e,t,n[d],r+1))}f=n["*"],f&&u(e,t,f,r+1),l=n["**"];if(l)if(r<p){l._listeners&&u(e,t,l,p);for(a in l)a!=="_listeners"&&l.hasOwnProperty(a)&&(a===v?u(e,t,l[a],r+2):a===d?u(e,t,l[a],r+1):(c={},c[a]=l[a],u(e,t,{"**":c},r+1)))}else l._listeners?u(e,t,l,p):l["*"]&&l["*"]._listeners&&u(e,t,l["*"],p);return i}function a(e,n){e=typeof e=="string"?e.split(this.delimiter):e.slice();for(var i=0,s=e.length;i+1<s;i++)if(e[i]==="**"&&e[i+1]==="**")return;var o=this.listenerTree,u=e.shift();while(u){o[u]||(o[u]={}),o=o[u];if(e.length===0){if(!o._listeners)o._listeners=n;else if(typeof o._listeners=="function")o._listeners=[o._listeners,n];else if(t(o._listeners)){o._listeners.push(n);if(!o._listeners.warned){var a=r;typeof this._events.maxListeners!="undefined"&&(a=this._events.maxListeners),a>0&&o._listeners.length>a&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}return!0}u=e.shift()}return!0}var t=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},r=10;o.prototype.delimiter=".",o.prototype.setMaxListeners=function(e){this._events||i.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},o.prototype.event="",o.prototype.once=function(e,t){return this.many(e,1,t),this},o.prototype.many=function(e,t,n){function i(){--t===0&&r.off(e,i),n.apply(this,arguments)}var r=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");return i._origin=n,this.on(e,i),r},o.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if(e==="newListener"&&!this.newListener&&!this._events.newListener)return!1;if(this._all){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];for(r=0,t=this._all.length;r<t;r++)this.event=e,this._all[r].apply(this,n)}if(e==="error"&&!this._all&&!this._events.error&&(!this.wildcard||!this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var o=typeof e=="string"?e.split(this.delimiter):e.slice();u.call(this,s,o,this.listenerTree,0)}else s=this._events[e];if(typeof s=="function"){this.event=e;if(arguments.length===1)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];s.apply(this,n)}return!0}if(s){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];var a=s.slice();for(var r=0,t=a.length;r<t;r++)this.event=e,a[r].apply(this,n);return a.length>0||!!this._all}return!!this._all},o.prototype.on=function(e,n){if(typeof e=="function")return this.onAny(e),this;if(typeof n!="function")throw new Error("on only accepts instances of Function");this._events||i.call(this),this.emit("newListener",e,n);if(this.wildcard)return a.call(this,e,n),this;if(!this._events[e])this._events[e]=n;else if(typeof this._events[e]=="function")this._events[e]=[this._events[e],n];else if(t(this._events[e])){this._events[e].push(n);if(!this._events[e].warned){var s=r;typeof this._events.maxListeners!="undefined"&&(s=this._events.maxListeners),s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}return this},o.prototype.onAny=function(e){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(e,n){if(typeof n!="function")throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var s=typeof e=="string"?e.split(this.delimiter):e.slice();i=u.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var o=0;o<i.length;o++){var a=i[o];r=a._listeners;if(t(r)){var f=-1;for(var l=0,c=r.length;l<c;l++)if(r[l]===n||r[l].listener&&r[l].listener===n||r[l]._origin&&r[l]._origin===n){f=l;break}if(f<0)continue;return this.wildcard?a._listeners.splice(f,1):this._events[e].splice(f,1),r.length===0&&(this.wildcard?delete a._listeners:delete this._events[e]),this}if(r===n||r.listener&&r.listener===n||r._origin&&r._origin===n)this.wildcard?delete a._listeners:delete this._events[e]}return this},o.prototype.offAny=function(e){var t=0,n=0,r;if(e&&this._all&&this._all.length>0){r=this._all;for(t=0,n=r.length;t<n;t++)if(e===r[t])return r.splice(t,1),this}else this._all=[];return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(e){if(arguments.length===0)return!this._events||i.call(this),this;if(this.wildcard){var t=typeof e=="string"?e.split(this.delimiter):e.slice(),n=u.call(this,null,t,this.listenerTree,0);for(var r=0;r<n.length;r++){var s=n[r];s._listeners=null}}else{if(!this._events[e])return this;this._events[e]=null}return this},o.prototype.listeners=function(e){if(this.wildcard){var n=[],r=typeof e=="string"?e.split(this.delimiter):e.slice();return u.call(this,n,r,this.listenerTree,0),n}return this._events||i.call(this),this._events[e]||(this._events[e]=[]),t(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},o.prototype.listenersAny=function(){return this._all?this._all:[]},typeof define=="function"&&define.amd?define(function(){return o}):typeof n=="object"?n.EventEmitter2=o:window.EventEmitter2=o}()})()},{}]},{},[1]);